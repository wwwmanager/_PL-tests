# –û—Ç—á—ë—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ ‚úÖ

### 1. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏ (vite.config.ts)
- ‚úÖ **Manual chunks** - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ vendor –±–∏–±–ª–∏–æ—Ç–µ–∫ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —á–∞–Ω–∫–∏:
  - `react-vendor` - React core (react, react-dom)
  - `forms-vendor` - –§–æ—Ä–º—ã –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è (react-hook-form, zod)
  - `ui-vendor` - UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (recharts, localforage)
  - `ai-vendor` - Google Generative AI
  - `parser-vendor` - Cheerio –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞
  
- ‚úÖ **Terser –º–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è** —Å —É–¥–∞–ª–µ–Ω–∏–µ–º console.log –≤ production
- ‚úÖ **Sourcemaps –æ—Ç–∫–ª—é—á–µ–Ω—ã** –¥–ª—è production (—É–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞)
- ‚úÖ **optimizeDeps** - –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –£–ª—É—á—à–µ–Ω–∏–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è, –º–µ–Ω—å—à–∏–π —Ä–∞–∑–º–µ—Ä initial bundle

### 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

#### WaybillDetail.tsx (60KB)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `useCallback` –¥–ª—è:
  - `handleChange`
  - `handleNumericChange`
  - `handleAddRoute`
  - `handleRemoveRoute`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç `formData` –Ω–∞ `prev` –≤ setters
- ‚úÖ `RouteRow` —É–∂–µ –≤—ã–Ω–µ—Å–µ–Ω –∏ –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω (–∏–∑ –ø—Ä–æ—à–ª—ã—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π)

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ —Ä–µ—Ä–µ–Ω–¥–µ—Ä—ã –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

#### Dashboard.tsx (15KB)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –º–µ–º–æ–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
  - `Modal` - React.memo
  - `KpiCard` - React.memo
  - `ChartCard` - React.memo
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `useCallback` –¥–ª—è:
  - `handleFilterChange`
  - `handleGenerate`
  - `handleModalClose`

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–µ—Ä–µ–Ω–¥–µ—Ä–æ–≤ –≥—Ä–∞—Ñ–∏–∫–æ–≤ (–¥–æ—Ä–æ–≥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –¥–ª—è recharts)

### 3. –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –º–æ–¥—É–ª–µ–π

#### services/api/core.ts
- ‚úÖ –í—ã–¥–µ–ª–µ–Ω—ã –æ–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã:
  - `clone`, `generateId`, `paginate`
  - `simulateNetwork`, `normalizeSearch`
  - –¢–∏–ø—ã API (ApiListResponse, ApiSingleResponse)

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—é mockApi.ts –Ω–∞ –º–æ–¥—É–ª–∏

#### components/shared/OptimizedFormComponents.tsx
- ‚úÖ –ú–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ñ–æ—Ä–º:
  - `FormField` - React.memo
  - `FormInput` - React.memo
  - `FormSelect` - React.memo
  - `FormTextarea` - React.memo

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ì–æ—Ç–æ–≤—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–º–µ—Å—Ç–æ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö —à–∞–≥–æ–≤

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

#### 1. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ mockApi.ts (87KB ‚Üí ~15KB –∫–∞–∂–¥—ã–π)
```
services/
  ‚îî‚îÄ‚îÄ api/
      ‚îú‚îÄ‚îÄ core.ts ‚úÖ (—Å–æ–∑–¥–∞–Ω)
      ‚îú‚îÄ‚îÄ index.ts (—Å–æ–∑–¥–∞—Ç—å - re-export –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π)
      ‚îú‚îÄ‚îÄ organizations.ts (—Å–æ–∑–¥–∞—Ç—å)
      ‚îú‚îÄ‚îÄ vehicles.ts (—Å–æ–∑–¥–∞—Ç—å)
      ‚îú‚îÄ‚îÄ employees.ts (—Å–æ–∑–¥–∞—Ç—å)
      ‚îú‚îÄ‚îÄ waybills.ts (—Å–æ–∑–¥–∞—Ç—å)
      ‚îú‚îÄ‚îÄ blanks.ts (—Å–æ–∑–¥–∞—Ç—å)
      ‚îî‚îÄ‚îÄ stock.ts (—Å–æ–∑–¥–∞—Ç—å)
```

**–í—ã–≥–æ–¥–∞**: –£–º–µ–Ω—å—à–µ–Ω–∏–µ initial bundle –Ω–∞ ~60-70KB

#### 2. Lazy loading –¥–ª—è –º–æ–¥–∞–ª–æ–≤
```typescript
const PrintableWaybill = lazy(() => import('./PrintableWaybill'));
const RouteImportModal = lazy(() => import('../dictionaries/RouteImportModal'));
const CorrectionModal = lazy(() => import('./CorrectionModal'));
```

**–í—ã–≥–æ–¥–∞**: –£–º–µ–Ω—å—à–µ–Ω–∏–µ initial bundle –Ω–∞ ~20-30KB

#### 3. –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–æ–≤
–î–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–æ —Å–ø–∏—Å–∫–∞–º–∏ >100 —ç–ª–µ–º–µ–Ω—Ç–æ–≤:
- `WaybillList.tsx`
- `EmployeeList.tsx`
- `VehicleList.tsx`
- `BlankManagement.tsx`

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `react-window` –∏–ª–∏ `react-virtual`:
```bash
npm install react-window @types/react-window
```

**–í—ã–≥–æ–¥–∞**: –£–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –±–æ–ª—å—à–∏–º–∏ —Å–ø–∏—Å–∫–∞–º–∏

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

#### 4. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ assets
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å WebP –≤–º–µ—Å—Ç–æ PNG/JPG
- –î–æ–±–∞–≤–∏—Ç—å lazy loading –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ú–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è CSS

#### 5. Service Worker –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- Offline-first —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
- Background sync –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

#### 6. Code splitting –ø–æ —Ä–æ—É—Ç–∞–º
```typescript
const Dashboard = lazy(() => import('./components/dashboard/Dashboard'));
const WaybillList = lazy(() => import('./components/waybills/WaybillList'));
const Admin = lazy(() => import('./components/admin/Admin'));
// –∏ —Ç.–¥. –¥–ª—è –≤—Å–µ—Ö views
```

**–í—ã–≥–æ–¥–∞**: –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ App.tsx! ‚úÖ

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

#### 7. Web Workers –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
- –†–∞—Å—á—ë—Ç —Ç–æ–ø–ª–∏–≤–∞ –≤ —Ñ–æ–Ω–µ
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤
- –ü–∞—Ä—Å–∏–Ω–≥ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤

#### 8. –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å React DevTools
- –ù–∞–π—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å —á–∞—Å—Ç—ã–º–∏ —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞–º–∏
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≥–æ—Ä—è—á–∏–µ —Ç–æ—á–∫–∏

---

## –¢–µ–∫—É—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏ (–æ—Ü–µ–Ω–æ—á–Ω–æ)

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –ü–æ—Å–ª–µ | –¶–µ–ª—å |
|---------|----------------|-------|------|
| Bundle size (gzipped) | ~800KB | ~600KB | <500KB |
| Initial load | ~3s | ~2s | <2s |
| Time to Interactive | ~4s | ~2.5s | <3s |
| Lighthouse Score | 75 | 85 | >90 |

---

## –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ?

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é
–Ø –º–æ–≥—É:
1. –†–∞–∑–±–∏—Ç—å mockApi.ts –Ω–∞ –º–æ–¥—É–ª–∏ (—Å–∞–º–∞—è –±–æ–ª—å—à–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)
2. –î–æ–±–∞–≤–∏—Ç—å lazy loading –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–∞–ª–æ–≤
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å compression –≤ vite config

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ó–∞–º–µ—Ä–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
```bash
npm run build
npm run preview
```
–ó–∞—Ç–µ–º –æ—Ç–∫—Ä—ã—Ç—å Chrome DevTools ‚Üí Lighthouse –∏ –∑–∞–º–µ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å React DevTools Profiler –¥–ª—è –ø–æ–∏—Å–∫–∞ —É–∑–∫–∏—Ö –º–µ—Å—Ç

---

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# –°–±–æ—Ä–∫–∞ production
npm run build

# –ê–Ω–∞–ª–∏–∑ —Ä–∞–∑–º–µ—Ä–∞ –±–∞–Ω–¥–ª–∞
npx vite-bundle-visualizer

# –ó–∞–ø—É—Å–∫ preview
npm run preview

# Lighthouse CI
npx lighthouse http://localhost:4173 --view
```

---

## –ò—Ç–æ–≥–∏

‚úÖ **–í—ã–ø–æ–ª–Ω–µ–Ω–æ**:
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è vite config (chunk splitting, minification)
- –ú–µ–º–æ–∏–∑–∞—Ü–∏—è WaybillDetail –∏ Dashboard
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—é mockApi.ts

‚è≥ **–û—Å—Ç–∞–ª–æ—Å—å**:
- –†–∞–∑–¥–µ–ª–∏—Ç—å mockApi.ts –Ω–∞ –º–æ–¥—É–ª–∏ (~60KB —ç–∫–æ–Ω–æ–º–∏–∏)
- –î–æ–±–∞–≤–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—é –¥–ª–∏–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤
- Lazy loading –¥–ª—è –º–æ–¥–∞–ª–æ–≤

üìä **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –£–º–µ–Ω—å—à–µ–Ω–∏–µ bundle size –Ω–∞ 30-40%, —É–ª—É—á—à–µ–Ω–∏–µ Time to Interactive –Ω–∞ 30-50%
